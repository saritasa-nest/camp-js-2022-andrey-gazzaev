"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[433],{433:(Pt,b,s)=>{s.r(b),s.d(b,{EditorModule:()=>$t});var L=s(2355),x=s(8941),H=s(3347),t=s(4537),T=s(9638);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editor"]],decls:4,vars:0,consts:[["mat-button","","title","Go to home page","routerLink","/catalog/",1,"link"],[1,"content"]],template:function(e,i){1&e&&(t.TgZ(0,"a",0),t._uU(1," Home\n"),t.qZA(),t.TgZ(2,"main",1),t._UZ(3,"router-outlet"),t.qZA())},dependencies:[T.zs,x.lC,x.yS],encapsulation:2}),n})();var N=s(4762),A=s(5557),K=s(4970),v=s(1528),F=s(1860),p=s(8168),g=s(7969),$=s(3151),S=s(3072),q=s(3568),C=s(4945),z=s(3787),V=s(5696),X=s(818),u=s(3804),a=s(92),W=s(5410),tt=s(789),et=s(4041),nt=s(2246),ot=s(5134),it=s(3781),G=s(4121),M=s(7479),rt=s(6466),I=s(6892),w=s(4002),J=s(5893),P=s(5732);let h=class{constructor(o,e){this.http=e,this.nextGenres$=new A.t(1),this.isSearch$=new G.X(!1),this.nextGenresUrl=null,this.genresUrl=new URL("anime/genres/",o.apiCampBaseUrl);const i=this.fetchGenres(this.genresUrl.toString(),""),r=this.nextGenres$.asObservable(),l=(0,F.T)(i,r).pipe((0,M.R)((c,d)=>[...c,...d]),(0,rt.d)({bufferSize:1,refCount:!0}));this.currentGenres$=this.isSearch$.pipe((0,v.w)(c=>c?r:l))}fetchGenres(o,e){return this.http.get(o,{params:{search:e}}).pipe((0,g.U)(i=>w.e.fromDto(i,r=>I.U.fromDto(r))),(0,p.b)(i=>{this.nextGenresUrl=i.next}),(0,g.U)(i=>i.results))}getMoreGenres(){return this.fetchGenres(this.nextGenresUrl??this.genresUrl.toString(),"").pipe((0,p.b)(o=>{this.nextGenres$.next(o)}))}findGenresByName(o){return null===o||0===o.length?(this.isSearch$.next(!1),(0,C.of)(null)):this.fetchGenres(this.genresUrl.toString(),o).pipe((0,p.b)(e=>{this.isSearch$.next(!0),this.nextGenres$.next(e)}))}createGenre(o){if(null===o)return(0,C.of)(null);const e=I.U.toDto(o);return this.http.post(this.genresUrl.toString(),e).pipe((0,g.U)(i=>I.U.fromDto(i)),(0,p.b)(i=>this.nextGenres$.next([i])))}deleteGenre(o){return this.http.delete(`${this.genresUrl.toString()}${o}/`)}addGenres(o){this.nextGenres$.next(o)}};h.\u0275fac=function(o){return new(o||h)(t.LFG(J._),t.LFG(P.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h=(0,N.gn)([(0,u.c)()],h);var U=s(5256);let st=(()=>{class n{constructor(e,i){this.http=i,this.nextStudios$=new A.t(1),this.isSearch$=new G.X(!1),this.nextStudiosUrl=null,this.studiosUrl=new URL("anime/studios/",e.apiCampBaseUrl);const r=this.fetchStudios(this.studiosUrl.toString(),""),l=this.nextStudios$.asObservable(),c=(0,F.T)(r,l).pipe((0,M.R)((d,m)=>[...d,...m]));this.currentStudios$=this.isSearch$.pipe((0,v.w)(d=>d?l:c))}fetchStudios(e,i){return this.http.get(e,{params:{search:i}}).pipe((0,g.U)(r=>w.e.fromDto(r,l=>U.B.fromDto(l))),(0,p.b)(r=>{this.nextStudiosUrl=r.next}),(0,g.U)(r=>r.results))}getMoreStudios(){return this.fetchStudios(this.nextStudiosUrl??this.studiosUrl.toString(),"").pipe((0,p.b)(e=>this.nextStudios$.next(e)))}findStudiosByName(e){return null===e||0===e.length?(this.isSearch$.next(!1),(0,C.of)(null)):this.fetchStudios(this.studiosUrl.toString(),e).pipe((0,p.b)(i=>{this.isSearch$.next(!0),this.nextStudios$.next(i)}))}createStudio(e){if(null===e)return(0,C.of)(null);const i=U.B.toDto(e);return this.http.post(this.studiosUrl.toString(),i).pipe((0,g.U)(r=>U.B.fromDto(r)),(0,p.b)(r=>{this.nextStudios$.next([r])}))}deleteStudio(e){return this.http.delete(`${this.studiosUrl.toString()}${e}/`)}addStudios(e){this.nextStudios$.next(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(J._),t.LFG(P.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var E=s(8692),at=s(6438),O=s(3331),y=s(1997),f=s(8659),lt=s(9665),Z=s(3704),ct=s(4639),Y=s(8377),mt=s(8697),Q=s(8033),B=s(1379);function ut(n,o){if(1&n&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let pt=(()=>{class n{constructor(){this.label="",this.formControlSelect=new a.NI(""),this.collection=[],this.trackItemItem=function(e,i){return i}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-simple-select"]],inputs:{label:"label",formControlSelect:"formControlSelect",collection:"collection"},decls:5,vars:4,consts:[["appearance","fill"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.YNc(4,ut,2,2,"mat-option",2),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(i.label),t.xp6(1),t.Q6J("formControl",i.formControlSelect),t.xp6(1),t.Q6J("ngForOf",i.collection)("ngForTrackBy",i.trackItemItem))},dependencies:[a.JJ,E.sg,f.KE,f.hX,Q.gD,B.ey,a.oH],encapsulation:2,changeDetection:0}),n})();var dt=s(4325);let gt=(()=>{class n{onClick(e){e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","click-stop-propagation",""]],hostBindings:function(e,i){1&e&&t.NdJ("click",function(l){return i.onClick(l)})}}),n})();function ft(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCreateEntity())}),t._uU(2),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" Create ",e.entitiesName," ")}}function ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"mat-option",7)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"button",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onRemoveEntity(l.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(2),t.Oqu(e.name)}}function _t(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onMoreEntities())}),t._uU(2),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" Add more ",e.entitiesName," ")}}let vt=(()=>{class n{constructor(){this.entities=[],this.selectorLabel="",this.entitiesName="",this.formControlEntities=new a.NI([]),this.formControlSearchEntity=new a.NI(""),this.createEntity=new t.vpe,this.removeEntity=new t.vpe,this.moreEntities=new t.vpe,this.trackItemEntity=function(e,i){return i.id}}onCreateEntity(){this.createEntity.emit()}onRemoveEntity(e){this.removeEntity.emit(e)}onMoreEntities(){this.moreEntities.emit()}isStringEmpty(e){return null===e||0===e.length}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-entity-select"]],inputs:{entities:"entities",selectorLabel:"selectorLabel",entitiesName:"entitiesName",formControlEntities:"formControlEntities",formControlSearchEntity:"formControlSearchEntity"},outputs:{createEntity:"createEntity",removeEntity:"removeEntity",moreEntities:"moreEntities"},decls:9,vars:8,consts:[["appearance","fill"],["multiple","",3,"formControl"],[3,"placeholderLabel","formControl"],[4,"ngIf"],["class","option",4,"ngFor","ngForOf","ngForTrackBy"],["mat-stroked-button","","type","button",3,"click"],[1,"option"],[3,"value"],["mat-button","","type","button","click-stop-propagation","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1)(4,"mat-option"),t._UZ(5,"ngx-mat-select-search",2),t.qZA(),t.YNc(6,ft,3,1,"ng-container",3),t.YNc(7,ht,7,2,"div",4),t.YNc(8,_t,3,1,"ng-container",3),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(i.selectorLabel),t.xp6(1),t.Q6J("formControl",i.formControlEntities),t.xp6(2),t.Q6J("placeholderLabel","Find "+i.entitiesName+"...")("formControl",i.formControlSearchEntity),t.xp6(1),t.Q6J("ngIf",0===i.entities.length),t.xp6(1),t.Q6J("ngForOf",i.entities)("ngForTrackBy",i.trackItemEntity),t.xp6(1),t.Q6J("ngIf",i.isStringEmpty(i.formControlSearchEntity.value)))},dependencies:[a.JJ,E.sg,E.O5,O.Hw,f.KE,f.hX,Q.gD,B.ey,T.lW,a.oH,dt.nu,gt],styles:[".option[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})();function St(n,o){if(1&n&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&n){const e=o.text;t.xp6(1),t.Oqu(e)}}function xt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",42),t._UZ(1,"img",43),t.TgZ(2,"button",44),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.onRemoveCurrentPoster())}),t.TgZ(3,"mat-icon",45),t._uU(4,"delete"),t.qZA()()()}if(2&n){const e=o.ngIf;t.xp6(1),t.Q6J("src",e,t.LSH)}}function Ct(n,o){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.animeForm.controls.image.getError("imageServe")," ")}}function Et(n,o){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.animeForm.controls.trailerYoutubeId.getError("trailerYoutubeIdServe")," ")}}function yt(n,o){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.animeForm.controls.titleEnglish.getError("titleEnglishServe")," ")}}function Zt(n,o){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.animeForm.controls.titleJapanese.getError("titleJapaneseServe")," ")}}function Ft(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",6),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onFormSubmit())}),t.TgZ(2,"mat-card-title")(3,"h1",7),t._uU(4,"Anime editor"),t.qZA()(),t._UZ(5,"mat-divider",8),t.TgZ(6,"mat-card-subtitle")(7,"h2",9),t._uU(8,"Base information"),t.qZA()(),t.TgZ(9,"mat-card-content",10),t.YNc(10,xt,5,1,"div",11),t.ALo(11,"async"),t.TgZ(12,"mat-form-field",12)(13,"ngx-mat-file-input",13)(14,"mat-icon",14),t._uU(15,"folder"),t.qZA()(),t.YNc(16,Ct,2,1,"mat-error",15),t.qZA(),t.TgZ(17,"div",16)(18,"mat-form-field",17)(19,"mat-label"),t._uU(20,"Enter trailer youtube id"),t.qZA(),t._UZ(21,"input",18),t.YNc(22,Et,2,1,"mat-error",15),t.qZA(),t.TgZ(23,"mat-form-field",17)(24,"mat-label"),t._uU(25,"Title in English"),t.qZA(),t._UZ(26,"input",19),t.YNc(27,yt,2,1,"mat-error",15),t.qZA(),t.TgZ(28,"mat-form-field",17)(29,"mat-label"),t._uU(30,"Title in Japanese"),t.qZA(),t._UZ(31,"input",20),t.YNc(32,Zt,2,1,"mat-error",15),t.qZA()(),t.TgZ(33,"mat-form-field",17)(34,"mat-label"),t._uU(35,"Synopsis"),t.qZA(),t._UZ(36,"textarea",21),t.qZA()(),t._UZ(37,"mat-divider",8),t.TgZ(38,"mat-card-subtitle")(39,"h2",9),t._uU(40,"Status information"),t.qZA()(),t.TgZ(41,"mat-card-content",22)(42,"div",23),t._UZ(43,"app-simple-select",24)(44,"app-simple-select",25)(45,"app-simple-select",26)(46,"app-simple-select",27)(47,"app-simple-select",28),t.qZA(),t.TgZ(48,"div",29)(49,"mat-form-field",30)(50,"mat-label"),t._uU(51,"Anime airing"),t.qZA(),t.TgZ(52,"mat-date-range-input",31),t._UZ(53,"input",32)(54,"input",33),t.qZA(),t.TgZ(55,"mat-hint"),t._uU(56,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(57,"mat-datepicker-toggle",34)(58,"mat-date-range-picker",null,35),t.qZA(),t.TgZ(60,"mat-slide-toggle",36),t._uU(61," Airing "),t.qZA()()(),t._UZ(62,"mat-divider",8),t.TgZ(63,"mat-card-subtitle")(64,"h2",9),t._uU(65,"More information"),t.qZA()(),t.TgZ(66,"mat-card-content",37)(67,"app-entity-select",38),t.NdJ("createEntity",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onCreateGenre())})("moreEntities",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onMoreGenres())})("removeEntity",function(r){t.CHM(e);const l=t.oxw(3);return t.KtG(l.onRemoveGenre(r))}),t.qZA(),t.TgZ(68,"app-entity-select",39),t.NdJ("createEntity",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onCreateStudio())})("moreEntities",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onMoreStudios())})("removeEntity",function(r){t.CHM(e);const l=t.oxw(3);return t.KtG(l.onRemoveStudio(r))}),t.qZA()(),t._UZ(69,"mat-divider"),t.TgZ(70,"mat-card-actions",40)(71,"button",41),t._uU(72),t.qZA()()(),t.BQk()}if(2&n){const e=o.ngIf,i=t.MAs(59),r=t.oxw().ngIf,l=t.oxw().ngIf,c=t.oxw();t.xp6(1),t.Q6J("formGroup",c.animeForm),t.xp6(9),t.Q6J("ngIf",t.lcZ(11,27,c.currentPosterPreview$)),t.xp6(3),t.Q6J("accept","image/png, image/jpeg"),t.xp6(3),t.Q6J("ngIf",c.animeForm.controls.image.hasError("imageServe")),t.xp6(6),t.Q6J("ngIf",c.animeForm.controls.trailerYoutubeId.hasError("trailerYoutubeIdServe")),t.xp6(5),t.Q6J("ngIf",c.animeForm.controls.titleEnglish.hasError("titleEnglishServe")),t.xp6(5),t.Q6J("ngIf",c.animeForm.controls.titleJapanese.hasError("titleJapaneseServe")),t.xp6(11),t.Q6J("formControlSelect",c.animeForm.controls.type)("collection",e.types),t.xp6(1),t.Q6J("formControlSelect",c.animeForm.controls.status)("collection",e.statuses),t.xp6(1),t.Q6J("formControlSelect",c.animeForm.controls.source)("collection",e.sources),t.xp6(1),t.Q6J("formControlSelect",c.animeForm.controls.season)("collection",e.seasons),t.xp6(1),t.Q6J("formControlSelect",c.animeForm.controls.rating)("collection",e.ratings),t.xp6(5),t.Q6J("rangePicker",i)("formGroup",c.animeForm.controls.aired),t.xp6(5),t.Q6J("for",i),t.xp6(10),t.Q6J("entities",l)("formControlEntities",c.animeForm.controls.genres)("formControlSearchEntity",c.animeForm.controls.genresSearch),t.xp6(1),t.Q6J("entities",r)("formControlEntities",c.animeForm.controls.studios)("formControlSearchEntity",c.animeForm.controls.studiosSearch),t.xp6(4),t.hij(" ",c.isEditAnime?"Save anime":"Create a new anime entry"," ")}}function Tt(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ft,73,29,"ng-container",2),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2),i=t.MAs(6);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.statusInformation$))("ngIfElse",i)}}function At(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Tt,3,4,"ng-container",2),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(),i=t.MAs(6);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.studios$))("ngIfElse",i)}}function It(n,o){1&n&&(t.TgZ(0,"div",46),t._UZ(1,"mat-spinner",47),t.qZA())}function Ut(n,o){1&n&&t._UZ(0,"span")}let _=class{constructor(o,e,i,r,l,c){this.route=o,this.urlService=e,this.animeService=i,this.genreService=r,this.studioService=l,this.changeDetectorRef=c,this.genres$=this.genreService.currentGenres$,this.studios$=this.studioService.currentStudios$,this.isEditAnime=!1,this.posterPreview$=new A.t(1),this.animeForm=this.initAnimeForm();const d=this.animeForm.controls.image.valueChanges.pipe((0,K.h)(m=>null!==m),(0,v.w)(m=>this.previewPoster(m)));this.currentPosterPreview$=(0,F.T)(this.posterPreview$,d),this.statusInformation$=this.getStatusInformation()}ngOnInit(){const o=this.route.snapshot.params.id;void 0!==o?this.animeService.fetchAnimeEditor(o).pipe((0,p.b)(l=>{this.isEditAnime=!0,this.setInitValuesToAnimeForm(l),this.genreService.addGenres(l.genresData),this.studioService.addStudios(l.studiosData)})).pipe((0,g.U)(l=>l.image),(0,p.b)(l=>this.posterPreview$.next(l)),(0,u.t)(this)).subscribe():this.posterPreview$.next(null);const e=this.animeForm.controls.genresSearch.valueChanges.pipe((0,$.b)(500),(0,v.w)(r=>this.genreService.findGenresByName(r)),(0,u.t)(this)),i=this.animeForm.controls.studiosSearch.valueChanges.pipe((0,$.b)(500),(0,v.w)(r=>this.studioService.findStudiosByName(r)),(0,u.t)(this));(0,F.T)(e,i).subscribe()}onFormSubmit(){if(this.animeForm.markAllAsTouched(),this.animeForm.invalid)return;const o=this.getAnimeInformation();if(null===o)return;const{image:e,aired:i}=this.animeForm.getRawValue(),r={id:this.route.snapshot.params.id,information:o,aired:new tt.C({...i})};(function k(n,o,e){return(0,S.P)(()=>n()?o:e)})(()=>null!==e,this.animeService.savePoster(e).pipe((0,v.w)(m=>this.animeService.saveAnime({...r,posterUrl:m}))),this.currentPosterPreview$.pipe((0,v.w)(m=>this.animeService.saveAnime({...r,posterUrl:m})))).pipe((0,g.U)(m=>this.urlService.navigateToDetails(m)),(0,u.t)(this),(0,q.K)(m=>m instanceof W.g?(0,C.of)(this.setErrors(m)):(0,z._)(()=>m))).subscribe()}onMoreGenres(){this.genreService.getMoreGenres().pipe((0,u.t)(this)).subscribe()}onCreateGenre(){this.genreService.createGenre(this.animeForm.controls.genresSearch.value).pipe((0,u.t)(this)).subscribe()}onRemoveGenre(o){this.genreService.deleteGenre(o).pipe((0,u.t)(this)).subscribe();const e=this.animeForm.controls.genres.value;null!==e&&this.animeForm.controls.genres.setValue(e.filter(i=>i!==o)),this.animeForm.controls.genresSearch.setValue("")}onMoreStudios(){this.studioService.getMoreStudios().pipe((0,u.t)(this)).subscribe()}onCreateStudio(){this.studioService.createStudio(this.animeForm.controls.studiosSearch.value).pipe((0,u.t)(this)).subscribe()}onRemoveStudio(o){this.studioService.deleteStudio(o).pipe((0,u.t)(this)).subscribe();const e=this.animeForm.controls.studios.value;null!==e&&this.animeForm.controls.studios.setValue(e.filter(i=>i!==o)),this.animeForm.controls.studiosSearch.setValue("")}onRemoveCurrentPoster(){this.posterPreview$.next(null),this.animeForm.controls.image.setValue(null)}getAnimeInformation(){const{genres:o,isAiring:e,rating:i,season:r,source:l,status:c,studios:d,synopsis:m,titleEnglish:Gt,titleJapanese:Mt,trailerYoutubeId:wt,type:Jt}=this.animeForm.getRawValue(),R={rating:i,season:r,source:l,status:c,type:Jt};return(0,et.jP)(R)?{...R,trailerYoutubeId:wt,studios:d,synopsis:m,titleEnglish:Gt,titleJapanese:Mt,genres:o,isAiring:e}:null}setErrors(o){(0,nt.Z)(o,this.animeForm),this.changeDetectorRef.markForCheck()}setInitValuesToAnimeForm(o){this.animeForm.patchValue({...o,image:null,genresSearch:"",studiosSearch:""})}initAnimeForm(){return new a.cw({image:new a.NI(null),trailerYoutubeId:new a.NI(null),titleEnglish:new a.NI("",{nonNullable:!0}),titleJapanese:new a.NI("",{nonNullable:!0}),synopsis:new a.NI("",{validators:a.kI.required,nonNullable:!0}),type:new a.NI(null,{validators:a.kI.required}),status:new a.NI(null,{validators:a.kI.required}),source:new a.NI(null,{validators:a.kI.required}),rating:new a.NI(null,{validators:a.kI.required}),season:new a.NI(null,{validators:a.kI.required}),isAiring:new a.NI(!1,{nonNullable:!0}),genres:new a.NI([],{validators:a.kI.required,nonNullable:!0}),studios:new a.NI([],{validators:a.kI.required,nonNullable:!0}),genresSearch:new a.NI("",{validators:a.kI.required,nonNullable:!0}),studiosSearch:new a.NI("",{validators:a.kI.required,nonNullable:!0}),aired:new a.cw({start:new a.NI(null),end:new a.NI(null)})})}getStatusInformation(){return(0,V.a)([(0,S.P)(()=>this.animeService.getAnimeTypes()),(0,S.P)(()=>this.animeService.getAnimeStatus()),(0,S.P)(()=>this.animeService.getSeason()),(0,S.P)(()=>this.animeService.getRating()),(0,S.P)(()=>this.animeService.getSource())]).pipe((0,g.U)(([o,e,i,r,l])=>({types:o,statuses:e,seasons:i,ratings:r,sources:l})))}previewPoster(o){const e=new FileReader;return e.readAsDataURL(o),new X.y(i=>{e.onload=()=>{const r=e.result instanceof ArrayBuffer?null:e.result;i.next(r),i.complete()}})}};_.\u0275fac=function(o){return new(o||_)(t.Y36(x.gz),t.Y36(ot.i),t.Y36(it.o),t.Y36(h),t.Y36(st),t.Y36(t.sBO))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-editor-form"]],decls:9,vars:4,consts:[[1,"editor__container"],["tpl",""],[4,"ngIf","ngIfElse"],["loading",""],["notEdit",""],[1,"control-error"],[1,"editor",3,"formGroup","ngSubmit"],[1,"mat-headline","editor__container"],[1,"editor__divider"],[1,"mat-title"],[1,"base-information"],["class","image-action",4,"ngIf"],["appearance","fill"],["formControlName","image","color","primary",3,"accept"],["ngxMatFileInputIcon",""],[4,"ngIf"],[1,"base-information__input-fields"],["appearance","fill",1,"base-information__field"],["matInput","","placeholder","1dy2zPPrKD0","formControlName","trailerYoutubeId"],["matInput","","placeholder","Naruto Shippuden","formControlName","titleEnglish"],["matInput","","placeholder","\u30ca\u30eb\u30c8- \u75be\u98a8\u4f1d","formControlName","titleJapanese"],["matInput","","placeholder","Anime about ...","formControlName","synopsis",1,"synopsis"],[1,"status-information"],[1,"status-information__select-fields"],["label","Type",1,"status-information__field",3,"formControlSelect","collection"],["label","Status",1,"status-information__field",3,"formControlSelect","collection"],["label","Source",1,"status-information__field",3,"formControlSelect","collection"],["label","Season",1,"status-information__field",3,"formControlSelect","collection"],["label","Rating",1,"status-information__field",3,"formControlSelect","collection"],[1,"status-information__aired-fields"],["appearance","fill",1,"status-information__field"],[3,"rangePicker","formGroup"],["matStartDate","","placeholder","Start date","formControlName","start"],["matEndDate","","placeholder","End date","formControlName","end"],["matSuffix","",3,"for"],["airedPicker",""],["formControlName","isAiring",1,"status-information__field"],[1,"more-information"],["selectorLabel","Genres","entitiesName","genres",1,"more-information__field",3,"entities","formControlEntities","formControlSearchEntity","createEntity","moreEntities","removeEntity"],["selectorLabel","Studios","entitiesName","studios",1,"more-information__field",3,"entities","formControlEntities","formControlSearchEntity","createEntity","moreEntities","removeEntity"],[1,"editor__container","buttons"],["mat-stroked-button","","type","submit"],[1,"image-action"],["alt","Poster preview",1,"base-information__image",3,"src"],["mat-button","","type","button",3,"click"],["aria-label","Remove this poster"],[1,"loading"],[1,"loading__spinner"]],template:function(o,e){if(1&o&&(t.TgZ(0,"mat-card",0),t.YNc(1,St,2,1,"ng-template",null,1,t.W1O),t.YNc(3,At,3,4,"ng-container",2),t.ALo(4,"async"),t.qZA(),t.YNc(5,It,2,0,"ng-template",null,3,t.W1O),t.YNc(7,Ut,1,0,"ng-template",null,4,t.W1O)),2&o){const i=t.MAs(6);t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,e.genres$))("ngIfElse",i)}},dependencies:[a._Y,a.Fj,a.JJ,a.JL,E.O5,at.d,O.Hw,y.a8,y.dn,y.n5,y.$j,y.hq,f.TO,f.KE,f.bx,f.hX,f.R9,lt.Nt,T.lW,Z.nW,Z.wx,Z.zY,Z.By,Z._g,a.sg,a.u,ct.Rr,Y.v6,Y.qb,mt.Ou,pt,vt,E.Ov],styles:[".editor__container[_ngcontent-%COMP%]{margin:20px auto;max-width:var(--default-max-width-container)}.base-information[_ngcontent-%COMP%]{display:flex;flex-direction:column}.base-information__image[_ngcontent-%COMP%]{max-width:300px}.base-information__input-fields[_ngcontent-%COMP%] > .base-information__field[_ngcontent-%COMP%], .status-information__aired-fields[_ngcontent-%COMP%] > .status-information__field[_ngcontent-%COMP%], .more-information__field[_ngcontent-%COMP%]{margin-right:20px}.synopsis[_ngcontent-%COMP%]{min-height:150px;resize:none}.status-information[_ngcontent-%COMP%]{display:flex;flex-direction:column}.status-information__select-fields[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-content:flex-start}.status-information__select-fields[_ngcontent-%COMP%] > .status-information__field[_ngcontent-%COMP%]{margin-right:50px}.status-information__aired-fields[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.editor__divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.loading__spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.image-action[_ngcontent-%COMP%]{display:flex}"],changeDetection:0}),_=(0,N.gn)([(0,u.c)()],_);const bt=[{path:"",component:j,canActivate:[H.T],children:[{path:"",component:_},{path:":id",component:_}]}];let Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild(bt),x.Bz]}),n})(),$t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[L.m,Nt]}),n})()}}]);