"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[725],{9725:(D,w,i)=>{i.r(w),i.d(w,{AuthModule:()=>Q});var U=i(1219),p=i(1312),t=i(4537),d=i(9638);let M=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth"]],decls:3,vars:0,consts:[["mat-button","","title","Go to home page","routerLink","/catalog/",1,"link"]],template:function(r,a){1&r&&(t.TgZ(0,"a",0),t._uU(1,"Home"),t.qZA(),t._UZ(2,"router-outlet"))},dependencies:[d.zs,p.lC,p.yS],styles:[".auth-form[_ngcontent-%COMP%]{max-width:320px;margin-top:90px;margin-inline:auto}.auth-form__heading[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.form-hint[_ngcontent-%COMP%]{position:relative}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.password-input__description[_ngcontent-%COMP%]{position:absolute}"]}),o})();var T=i(4762),b=i(8168),F=i(3568),A=i(4945),x=i(3787),g=i(3804),e=i(92),y=i(5887),Z=i(4041);function P(o,n){o.data&&Object.entries(o.data).forEach(([r,a])=>{(0,Z.EI)(r,n.controls)&&n.controls[r].setErrors({[r]:a})})}var _=i(5134),I=i(369),S=i(7666);let O=(()=>{class o{constructor(r){this.snackBar=r}showError(r){this.snackBar.open(r??"","ok",{duration:2e3})}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(S.ux))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=i(8692),h=i(8096),l=i(8659),v=i(9665),k=i(3331);function J(o,n){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const r=n.$implicit;t.xp6(1),t.hij(" ",r," ")}}function N(o,n){if(1&o&&(t.TgZ(0,"mat-error")(1,"ul"),t.YNc(2,J,2,1,"li",5),t.qZA()()),2&o){const r=t.oxw();t.xp6(2),t.Q6J("ngForOf",r.control.getError("password"))}}function B(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.control.getError("match")," ")}}const q=["*"];let E=(()=>{class o{constructor(){this.label="",this.control=new e.NI(""),this.isHiddenPassword=!0}handlePasswordToggle(){this.isHiddenPassword=!this.isHiddenPassword}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-password-input"]],inputs:{label:"label",control:"control"},ngContentSelectors:q,decls:11,vars:8,consts:[["appearance","fill",1,"form-field"],["matInput","","autocomplete","current-password",3,"type","formControl"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[4,"ngIf"],[1,"form-hint"],[4,"ngFor","ngForOf"]],template:function(r,a){1&r&&(t.F$t(),t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"button",2),t.NdJ("click",function(){return a.handlePasswordToggle()}),t.TgZ(5,"mat-icon"),t._uU(6),t.qZA()(),t.YNc(7,N,3,1,"mat-error",3),t.YNc(8,B,2,1,"mat-error",3),t.TgZ(9,"mat-hint",4),t.Hsn(10),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(a.label),t.xp6(1),t.Q6J("type",a.isHiddenPassword?"password":"text")("formControl",a.control),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",a.isHiddenPassword),t.xp6(2),t.Oqu(a.isHiddenPassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",a.control.hasError("password")),t.xp6(1),t.Q6J("ngIf",a.control.hasError("match")))},dependencies:[e.Fj,e.JJ,f.sg,f.O5,k.Hw,l.TO,l.KE,l.bx,l.hX,l.R9,v.Nt,d.lW,e.oH],styles:[".auth-form[_ngcontent-%COMP%]{max-width:320px;margin-top:90px;margin-inline:auto}.auth-form__heading[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.form-hint[_ngcontent-%COMP%]{position:relative}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.password-input__description[_ngcontent-%COMP%]{position:absolute}"]}),o})();function R(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.loginForm.controls.email.getError("email")," ")}}function j(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.loginForm.controls.password.getError("password")," ")}}let m=class{constructor(n,r,a,s,c){this.urlService=n,this.formBuilder=r,this.userService=a,this.snackBarService=s,this.changeDetectorRef=c,this.isHiddenPassword=!0,this.loginForm=this.initLoginForm()}handlePasswordToggle(){this.isHiddenPassword=!this.isHiddenPassword}handleFormSubmit(){if(this.loginForm.markAllAsTouched(),this.loginForm.invalid)return;const n=this.loginForm.getRawValue();if(!(0,Z.jP)(n))return;const{password:r,email:a}=n;this.userService.login({email:a,password:r}).pipe((0,b.b)(()=>this.urlService.navigateToHome()),(0,g.t)(this),(0,F.K)(s=>s instanceof y.g?(0,A.of)(this.setErrors(s)):(0,x._)(()=>s))).subscribe()}setErrors(n){this.snackBarService.showError(n.detail),P(n,this.loginForm),this.changeDetectorRef.markForCheck()}initLoginForm(){return this.formBuilder.group({email:["",[e.kI.required,e.kI.email]],password:["",[e.kI.required]]},{updateOn:"blur"})}};function Y(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.hij(" ",r.registrationForm.controls.email.getError("email")," ")}}m.\u0275fac=function(n){return new(n||m)(t.Y36(_.i),t.Y36(e.qu),t.Y36(I.K),t.Y36(O),t.Y36(t.sBO))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-login"]],decls:21,vars:4,consts:[[1,"auth-form","mat-elevation-z8",3,"formGroup","submit"],[1,"form-header"],[1,"auth-form__heading","mat-headline"],["appearance","fill",1,"form-field"],["matInput","","placeholder","pat@example.com","formControlName","email","type","email","autocomplete","email"],[4,"ngIf"],["label","Enter your password",3,"control"],[1,"form-buttons"],["mat-stroked-button","","type","submit",1,"form-buttons__button"],["role","list",1,"form-list"],["role","listitem"],["mat-button","","href","#",1,"link"],["mat-button","","routerLink","/auth/registration/",1,"link"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return r.handleFormSubmit()}),t.TgZ(1,"header",1)(2,"h1",2),t._uU(3,"Log In"),t.qZA()(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Enter your email"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,R,2,1,"mat-error",5),t.qZA(),t.TgZ(9,"app-password-input",6),t.YNc(10,j,2,1,"mat-error",5),t.qZA(),t.TgZ(11,"div",7)(12,"button",8),t._uU(13," Login "),t.qZA()(),t.TgZ(14,"mat-list",9)(15,"mat-list-item",10)(16,"a",11),t._uU(17,"Forgot your password?"),t.qZA()(),t.TgZ(18,"mat-list-item",10)(19,"a",12),t._uU(20,"Don't have an account?"),t.qZA()()()()),2&n&&(t.Q6J("formGroup",r.loginForm),t.xp6(8),t.Q6J("ngIf",r.loginForm.controls.email.hasError("email")),t.xp6(1),t.Q6J("control",r.loginForm.controls.password),t.xp6(1),t.Q6J("ngIf",r.loginForm.controls.password.hasError("password")))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,f.O5,h.i$,h.Tg,l.TO,l.KE,l.hX,v.Nt,d.lW,d.zs,e.sg,e.u,p.yS,E],styles:[".auth-form[_ngcontent-%COMP%]{max-width:320px;margin-top:90px;margin-inline:auto}.auth-form__heading[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.form-hint[_ngcontent-%COMP%]{position:relative}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.password-input__description[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),m=(0,T.gn)([(0,g.c)()],m);let u=class{constructor(n,r,a,s,c){this.urlService=n,this.formBuilder=r,this.userService=a,this.snackBarService=s,this.changeDetectorRef=c,this.registrationForm=this.initRegistrationForm()}onFormSubmit(){if(this.registrationForm.markAllAsTouched(),this.registrationForm.invalid)return;const n=this.registrationForm.getRawValue();if(!(0,Z.jP)(n))return;const{password:r,email:a,firstName:s,lastName:c}=n;this.userService.register({password:r,email:a,firstName:s,lastName:c,avatarUrl:"https://s3.us-west-2.amazonaws.com/camp-js-backend-files-dev/user_avatars%2Ff33c09a7-a15e-4b7c-b47f-650bfe19faff%2Fprofile.jpg"}).pipe((0,b.b)(()=>this.urlService.navigateToHome()),(0,g.t)(this),(0,F.K)(C=>C instanceof y.g?(0,A.of)(this.setErrors(C)):(0,x._)(()=>C))).subscribe()}setErrors(n){this.snackBarService.showError(n.detail),P(n,this.registrationForm),this.changeDetectorRef.markForCheck()}initRegistrationForm(){return this.formBuilder.group({email:["test@test.com",[e.kI.required,e.kI.email]],firstName:["123",[e.kI.required]],lastName:["123",[e.kI.required]],password:["12345678Test",[e.kI.required,e.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,64}$/i)]],passwordConfirm:["12345678Tes",[e.kI.required,this.matchControl()]]},{updateOn:"blur"})}matchControl(){return n=>this.registrationForm&&this.registrationForm.get("password")?.value!==n.value?{match:"Passwords did not match"}:null}};u.\u0275fac=function(n){return new(n||u)(t.Y36(_.i),t.Y36(e.qu),t.Y36(I.K),t.Y36(O),t.Y36(t.sBO))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-registration"]],decls:37,vars:4,consts:[[1,"auth-form","mat-elevation-z8",3,"formGroup","submit"],[1,"form-header"],[1,"auth-form__heading","mat-headline"],["appearance","fill",1,"form-field"],["matInput","","type","email","placeholder","thomas.anderson@rabbit.com","formControlName","email","autocomplete","email"],[4,"ngIf"],["matInput","","type","text","placeholder","Thomas","formControlName","firstName","autocomplete","given-name"],["matInput","","type","text","placeholder","Anderson","formControlName","lastName","autocomplete","family-name"],["label","Enter your password",3,"control"],["label","Confirm your password",3,"control"],[1,"form-buttons"],["mat-stroked-button","","type","submit",1,"form-buttons__button"],["role","list",1,"form-list"],["role","listitem"],["mat-button","","routerLink","/auth/login/",1,"link"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return r.onFormSubmit()}),t.TgZ(1,"header",1)(2,"h1",2),t._uU(3,"Registration"),t.qZA()(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Enter your email"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,Y,2,1,"mat-error",5),t.qZA(),t.TgZ(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Enter your first name"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"mat-form-field",3)(14,"mat-label"),t._uU(15,"Enter your last name"),t.qZA(),t._UZ(16,"input",7),t.qZA(),t.TgZ(17,"app-password-input",8)(18,"span"),t._uU(19,"Password must be: "),t.qZA(),t.TgZ(20,"ul")(21,"li"),t._uU(22,"Min 8 character"),t.qZA(),t.TgZ(23,"li"),t._uU(24,"Min 1 lowercase character"),t.qZA(),t.TgZ(25,"li"),t._uU(26,"Min 1 uppercase character"),t.qZA(),t.TgZ(27,"li"),t._uU(28,"Min 1 number"),t.qZA()()(),t._UZ(29,"app-password-input",9),t.TgZ(30,"div",10)(31,"button",11),t._uU(32," Register "),t.qZA()(),t.TgZ(33,"mat-list",12)(34,"mat-list-item",13)(35,"a",14),t._uU(36,"Do you have an account?"),t.qZA()()()()),2&n&&(t.Q6J("formGroup",r.registrationForm),t.xp6(8),t.Q6J("ngIf",r.registrationForm.controls.email.hasError("email")),t.xp6(9),t.Q6J("control",r.registrationForm.controls.password),t.xp6(12),t.Q6J("control",r.registrationForm.controls.passwordConfirm))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,f.O5,h.i$,h.Tg,l.TO,l.KE,l.hX,v.Nt,d.lW,d.zs,e.sg,e.u,p.yS,E],styles:[".auth-form[_ngcontent-%COMP%]{max-width:320px;margin-top:90px;margin-inline:auto}.auth-form__heading[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.form-hint[_ngcontent-%COMP%]{position:relative}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.password-input__description[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),u=(0,T.gn)([(0,g.c)()],u);const L=[{path:"",component:M,children:[{path:"login",component:m},{path:"registration",component:u}]}];let H=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(L),p.Bz]}),o})(),Q=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[U.m,H]}),o})()}}]);