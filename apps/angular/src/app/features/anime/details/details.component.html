<ng-container *ngIf="anime$ | async as anime">
  <app-image-popup></app-image-popup>
  <ng-container *ngIf="trailerUrl$ | async as url">
    <section class="details">
      <h2 class="mat-title">Anime details</h2>
      <mat-card class="details__card">
        <div class="detail__actions">
          <button
            type="button"
            class="empty-button"
            (click)="openImagePopup(anime.image, anime.imageTitle)"
          >
            <img
              class="details__image"
              [src]="anime.image"
              alt="Poster anime - {{ anime.imageTitle }}"
            />
          </button>
          <iframe
            *ngIf="anime.trailerYoutubeId"
            [src]="url"
            title="Anime trailer"
            class="details__trailer"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
        <div class="detail__info">
          <mat-card-title-group>
            <mat-card-title>{{
              anime.titleEnglish | placeholder
            }}</mat-card-title>
            <mat-card-subtitle>{{
              anime.titleJapanese | placeholder
            }}</mat-card-subtitle>
          </mat-card-title-group>
          <mat-card-content>
            <p class="details-field">
              Aired from
              {{ anime.aired.start | date: "dd.MM.YYYY" | placeholder }} to
              {{ anime.aired.end | date: "dd.MM.YYYY" | placeholder }}
            </p>
            <p class="details-field">
              Airing:
              <mat-chip>
                {{ anime.isAiring ? "Yes" : "No" }}
              </mat-chip>
            </p>
            <p class="details-field">
              Type:
              <mat-chip>
                {{ anime.type }}
              </mat-chip>
            </p>
            <p class="details-field">
              {{ anime.synopsis }}
            </p>
            <div class="details-field">
              <mat-label>Genres</mat-label>
              <mat-chip-list aria-label="List of genres">
                <mat-chip *ngFor="let genre of anime.genresData">
                  {{ genre.name }}
                </mat-chip>
              </mat-chip-list>
            </div>
            <div class="details-field">
              <mat-label>Studios</mat-label>
              <mat-chip-list aria-label="List of studios">
                <mat-chip *ngFor="let studio of anime.studiosData">
                  {{ studio.name }}
                </mat-chip>
              </mat-chip-list>
            </div>
          </mat-card-content>
        </div>
      </mat-card>
    </section>
  </ng-container>
</ng-container>
